import os
import django

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'blog.settings')
django.setup()

from django.contrib.auth.models import User
from articles.models import Article

# –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è admin
admin_user, created = User.objects.get_or_create(username='admin')
admin_user.set_password('admin')
admin_user.email = 'admin@admin.com'
admin_user.is_superuser = True
admin_user.is_staff = True
admin_user.save()

if created:
    print('‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: admin/admin')
else:
    print('‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: admin/admin')

# –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ –µ—Å–ª–∏ –µ—Å—Ç—å
Article.objects.all().delete()

# –°–æ–∑–¥–∞–µ–º 3 —Å—Ç–∞—Ç—å–∏
articles_data = [
    {
        'title': '–ü–µ—Ä–≤–∞—è —Å—Ç–∞—Ç—å—è –æ Django',
        'text': 'Django - —ç—Ç–æ –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ Python. –û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω—ã–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. Django —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø—É DRY (Don\'t Repeat Yourself) –∏ –≤–∫–ª—é—á–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π.'
    },
    {
        'title': '–†–∞–±–æ—Ç–∞ —Å –º–æ–¥–µ–ª—è–º–∏ –≤ Django',
        'text': '–ú–æ–¥–µ–ª–∏ –≤ Django - —ç—Ç–æ –∫–ª–∞—Å—Å—ã Python, –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Å—ã–≤–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ö–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç–∞–±–ª–∏—Ü–µ –≤ –ë–î. Django ORM –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –Ω–∞–ø–∏—Å–∞–Ω–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞–ø—Ä—è–º—É—é.'
    },
    {
        'title': '–®–∞–±–ª–æ–Ω—ã –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è',
        'text': '–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –≤ Django –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ—Ç–≤–µ—Ç—ã. –®–∞–±–ª–æ–Ω—ã –ø–æ–∑–≤–æ–ª—è—é—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ HTML —Å—Ç—Ä–∞–Ω–∏—Ü—ã. Django –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É —à–∞–±–ª–æ–Ω–æ–≤ —Å –ø—Ä–æ—Å—Ç—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º.'
    }
]

for data in articles_data:
    article = Article.objects.create(
        title=data['title'],
        author=admin_user,
        text=data['text']
    )
    print(f'‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç–∞—Ç—å—è: {article.title}')

print(f'\nüìä –ò—Ç–æ–≥–æ:')
print(f'   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {User.objects.count()}')
print(f'   –°—Ç–∞—Ç–µ–π: {Article.objects.count()}')
print(f'\nüîó –¢–µ–ø–µ—Ä—å –≤—Å–µ –ø—Ä–æ–µ–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é –ë–î: shared_db/django_labs.db')
